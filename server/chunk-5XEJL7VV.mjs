import './polyfills.server.mjs';
import{c as X}from"./chunk-CTDURT6M.mjs";import{a as it}from"./chunk-MBBWET6Z.mjs";import{$ as R,$a as Q,A as f,B as h,Ha as U,Na as q,R as s,S as F,Ua as G,Va as J,Z as v,_a as K,aa as V,b as w,ba as l,bb as Y,c as y,ca as M,da as j,ea as D,eb as d,fa as n,fb as Z,ga as o,gb as tt,h as T,ha as k,hb as et,ia as C,j as E,ja as _,k as I,ka as A,l as $,la as H,m as x,ma as a,na as W,oa as O,p as B,qa as u,ra as P,sa as z,t as S,ta as N,v as m}from"./chunk-LOAOCB3Z.mjs";var b=(()=>{let t=class t{constructor(){this._isAuthenticated$=new y(!0),this.isAuthenticated$=this._isAuthenticated$.asObservable()}get isAuthenticated(){return this._isAuthenticated$.value}login(){this._isAuthenticated$.next(!0)}logout(){this._isAuthenticated$.next(!1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ut(e,t){if(e&1){let c=C();n(0,"button",6),_("click",function(){f(c);let i=A();return h(i.auth.login())}),a(1,"Login"),o()}}function dt(e,t){if(e&1){let c=C();n(0,"button",7),_("click",function(){f(c);let i=A();return h(i.auth.logout())}),a(1,"Logout"),o()}}var nt=(()=>{let t=class t{constructor(r){this.auth=r}};t.\u0275fac=function(i){return new(i||t)(F(b))},t.\u0275cmp=m({type:t,selectors:[["bm-root"]],standalone:!0,features:[u],decls:12,vars:2,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],[1,"green"],[1,"red"],[1,"green",3,"click"],[1,"red",3,"click"]],template:function(i,p){i&1&&(n(0,"nav")(1,"a",0),a(2,"Home"),o(),n(3,"a",1),a(4,"Books"),o(),n(5,"a",2),a(6,"Administration"),o(),n(7,"div",3),v(8,ut,2,0,"button",4)(9,dt,2,0,"button",5),o()(),n(10,"main"),k(11,"router-outlet"),o()),i&2&&(s(8),l(p.auth.isAuthenticated?-1:8),s(),l(p.auth.isAuthenticated?9:-1))},dependencies:[Y,d,Z]});let e=t;return e})();var ft=e=>["/books",e];function ht(e,t){if(e&1&&(n(0,"li")(1,"a",3),a(2),n(3,"p",4),a(4),o()()()),e&2){let c=t.$implicit;s(),R("routerLink",P(3,ft,c.isbn)),s(),O(" ",c.title," "),s(2),W(c.subtitle)}}function vt(e,t){e&1&&(n(0,"li"),a(1,"No results"),o())}function Ct(e,t){if(e&1&&(n(0,"ul",2),j(1,ht,5,5,"li",null,M),v(3,vt,2,0,"li"),o()),e&2){let c=t;s(),D(c),s(2),l(c.length?-1:3)}}var ot=(()=>{let t=class t{constructor(){this.input$=new w,this.isLoading=!1,this.bookStoreService=S(it),this.results$=this.input$.pipe(T(r=>r.length>=3),E(500),I(),x(()=>this.isLoading=!0),$(r=>this.bookStoreService.getAllSearch(r)),x(()=>this.isLoading=!1))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["bm-search"]],standalone:!0,features:[u],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],[1,"search-results"],[3,"routerLink"],["role","doc-subtitle"]],template:function(i,p){if(i&1){let g=C();n(0,"input",1,0),_("input",function(){f(g);let mt=H(1);return h(p.input$.next(mt.value))}),o(),v(2,Ct,4,1,"ul",2),z(3,"async")}if(i&2){let g;V("loading",p.isLoading),s(2),l((g=N(3,3,p.results$))?2:-1,g)}},dependencies:[q,d]});let e=t;return e})();var rt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["bm-home"]],standalone:!0,features:[u],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(i,p){i&1&&(n(0,"h1"),a(1,"Home"),o(),n(2,"a",0),a(3," Show book list "),o(),n(4,"h2"),a(5,"Search"),o(),k(6,"bm-search"))},dependencies:[d,ot]});let e=t;return e})();var at=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:rt,title:"Home"},{path:"books",loadChildren:()=>import("./chunk-SS324OVO.mjs").then(e=>e.bookRoutes)},{path:"admin",loadChildren:()=>import("./chunk-Q5SXY7HX.mjs").then(e=>e.adminRoutes)}];var ct=(e,t)=>{let c="1234567890";if(S(b).isAuthenticated){let i=e.clone({setHeaders:{Authorization:`Bearer ${c}`}});return t(i)}else return t(e)};var st={providers:[tt(at,et()),Q(),G(J([ct]))]};var _t={providers:[X()]},pt=U(st,_t);var gt=()=>K(nt,pt),ie=gt;export{ie as a};
